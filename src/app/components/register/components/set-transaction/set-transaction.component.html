<div class="st-dialog">
    <h2>Transaction</h2>

    <form class="st-form" [formGroup]="transactionForm" (ngSubmit)="onSubmit()">
        @if (isLoading()) {
        <div class="spinner-wrapper">
            <mat-spinner></mat-spinner>
        </div>
        } @else {
        <mat-form-field>
            <mat-label>Date</mat-label>
            <input matInput [matDatepicker]="picker" formControlName="date">
            <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
        </mat-form-field>

        <div class="st-form-row">
            <div class="st-type-wrapper">
                <p style="margin: 0 0 5px 0">
                    {{ type() ? 'Expense' : 'Income' }}
                </p>

                <mat-slide-toggle [checked]="type()" (change)="type.set($event.checked)">
                </mat-slide-toggle>
            </div>

            <mat-form-field style="width: 70%">
                <mat-label>Category</mat-label>
                <mat-select formControlName="category">
                    @for(category of categories(); track category.id) {
                    <mat-option [value]="category.id">
                        <mat-icon>{{ category.icon }}</mat-icon> {{ category.name }}
                    </mat-option>
                    }
                </mat-select>
            </mat-form-field>
        </div>

        <mat-form-field>
            <mat-label>Method</mat-label>
            <mat-select formControlName="method">
                @for(method of methods(); track method.id) {
                <mat-option [value]="method.id">
                    <mat-icon>{{ method.icon }}</mat-icon> {{ method.name }}
                </mat-option>
                }
            </mat-select>
        </mat-form-field>

        <mat-form-field>
            <mat-label>Amount</mat-label>
            <input matInput placeholder="Amount" type="number" formControlName="amount" min="0" />
            <span matTextPrefix>$&nbsp;</span>
        </mat-form-field>

        <mat-form-field>
            <mat-label>Note</mat-label>
            <textarea matInput formControlName="note"></textarea>
        </mat-form-field>

        <div class="st-button-group">
            <button matButton="filled" type="submit" [disabled]="transactionForm.invalid">Submit</button>
            <button matButton="tonal" type="button" (click)="onClose()">Cancel</button>
        </div>
        }
    </form>
</div>